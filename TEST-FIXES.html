<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JaZeR Effects - Import Test</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a0a2a 50%, #0a1a2a 100%);
            color: #f0f0ff;
            padding: 2rem;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2.5rem;
            background: linear-gradient(135deg, #00f5ff, #ff2aff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .test-section h2 {
            color: #00f5ff;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        
        .status {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }
        
        .status.loading {
            background: rgba(255, 200, 0, 0.2);
            color: #ffcc00;
        }
        
        .status.success {
            background: rgba(0, 255, 100, 0.2);
            color: #00ff66;
        }
        
        .status.error {
            background: rgba(255, 0, 100, 0.2);
            color: #ff0066;
        }
        
        .log {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .log-line {
            margin-bottom: 0.3rem;
        }
        
        .log-line.success {
            color: #00ff66;
        }
        
        .log-line.error {
            color: #ff0066;
        }
        
        .log-line.info {
            color: #00c8ff;
        }
        
        button {
            background: linear-gradient(135deg, #ff0055, #00f5ff);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-right: 0.5rem;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .button-group {
            margin-top: 1rem;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>JaZeR Effects Test Suite</h1>
        
        <div class="test-section">
            <h2>Test 1: Import Background Engine</h2>
            <div id="test1-status" class="status loading">Testing...</div>
            <div id="test1-log" class="log"></div>
        </div>
        
        <div class="test-section">
            <h2>Test 2: Import Three.js</h2>
            <div id="test2-status" class="status loading">Testing...</div>
            <div id="test2-log" class="log"></div>
        </div>
        
        <div class="test-section">
            <h2>Test 3: Check Module Functions</h2>
            <div id="test3-status" class="status loading">Testing...</div>
            <div id="test3-log" class="log"></div>
        </div>
        
        <div class="test-section">
            <h2>Launch Effects</h2>
            <p style="margin-bottom: 1rem; opacity: 0.8;">If all tests pass, you can now launch any effect:</p>
            <div class="button-group">
                <button onclick="window.open('effects/jazer-plasma-storm.html', '_blank')">Plasma Storm</button>
                <button onclick="window.open('effects/jazer-neon-city.html', '_blank')">Neon City</button>
                <button onclick="window.open('effects/jazer-crystal-cave.html', '_blank')">Crystal Cave</button>
                <button onclick="window.open('effects/jazer-hyperspace-tunnel.html', '_blank')">Hyperspace Tunnel</button>
                <button onclick="window.open('effects/jazer-particle-galaxy.html', '_blank')">Particle Galaxy</button>
                <button onclick="window.open('index.html', '_blank')">View All Effects</button>
            </div>
        </div>
    </div>
    
    <script type="module">
        function addLog(testId, message, type = 'info') {
            const log = document.getElementById(`test${testId}-log`);
            const line = document.createElement('div');
            line.className = `log-line ${type}`;
            line.textContent = `• ${message}`;
            log.appendChild(line);
        }
        
        function setStatus(testId, status, message) {
            const statusEl = document.getElementById(`test${testId}-status`);
            statusEl.className = `status ${status}`;
            statusEl.textContent = message;
        }
        
        // Test 1: Import Background Engine
        try {
            addLog(1, 'Attempting to import jazer-background-engine.js...');
            const engine = await import('./jazer-background-engine.js');
            addLog(1, 'Successfully imported background engine!', 'success');
            
            const exports = Object.keys(engine);
            addLog(1, `Found ${exports.length} exports`, 'info');
            
            if (engine.mouse) addLog(1, '✓ mouse tracker available', 'success');
            if (engine.noise2D) addLog(1, '✓ noise2D function available', 'success');
            if (engine.ColorPalettes) addLog(1, '✓ ColorPalettes available', 'success');
            if (engine.Easing) addLog(1, '✓ Easing functions available', 'success');
            
            setStatus(1, 'success', '✓ PASSED');
        } catch (err) {
            addLog(1, `ERROR: ${err.message}`, 'error');
            addLog(1, err.stack, 'error');
            setStatus(1, 'error', '✗ FAILED');
        }
        
        // Test 2: Import Three.js
        try {
            addLog(2, 'Attempting to import Three.js...');
            const THREE = await import('./Three.js');
            addLog(2, 'Successfully imported Three.js!', 'success');
            
            if (THREE.Scene) addLog(2, '✓ THREE.Scene available', 'success');
            if (THREE.PerspectiveCamera) addLog(2, '✓ THREE.PerspectiveCamera available', 'success');
            if (THREE.WebGLRenderer) addLog(2, '✓ THREE.WebGLRenderer available', 'success');
            if (THREE.Mesh) addLog(2, '✓ THREE.Mesh available', 'success');
            
            addLog(2, `Three.js revision: ${THREE.REVISION}`, 'info');
            
            setStatus(2, 'success', '✓ PASSED');
        } catch (err) {
            addLog(2, `ERROR: ${err.message}`, 'error');
            addLog(2, err.stack, 'error');
            setStatus(2, 'error', '✗ FAILED');
        }
        
        // Test 3: Test Module Functions
        try {
            addLog(3, 'Testing noise functions...');
            const engine = await import('./jazer-background-engine.js');
            
            const noise2dResult = engine.noise2D(0.5, 0.5);
            addLog(3, `noise2D(0.5, 0.5) = ${noise2dResult.toFixed(4)}`, 'info');
            
            const noise3dResult = engine.noise3D(0.5, 0.5, 0.5);
            addLog(3, `noise3D(0.5, 0.5, 0.5) = ${noise3dResult.toFixed(4)}`, 'info');
            
            addLog(3, 'Testing mouse tracker...', 'info');
            engine.mouse.update();
            addLog(3, `Mouse position: (${engine.mouse.x.toFixed(2)}, ${engine.mouse.y.toFixed(2)})`, 'info');
            
            addLog(3, 'Testing color functions...', 'info');
            const color = engine.lerpColor('#ff0055', '#00f5ff', 0.5);
            addLog(3, `lerpColor('#ff0055', '#00f5ff', 0.5) = ${color}`, 'info');
            
            addLog(3, 'Testing easing functions...', 'info');
            const eased = engine.Easing.easeInOutQuad(0.5);
            addLog(3, `Easing.easeInOutQuad(0.5) = ${eased}`, 'info');
            
            addLog(3, 'All function tests passed!', 'success');
            setStatus(3, 'success', '✓ PASSED');
        } catch (err) {
            addLog(3, `ERROR: ${err.message}`, 'error');
            addLog(3, err.stack, 'error');
            setStatus(3, 'error', '✗ FAILED');
        }
    </script>
</body>
</html>
